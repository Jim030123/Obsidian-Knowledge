# Key Concept
A \* search, a best-first search that uses the evaluation function
A星搜索，一种使用评价函数的最佳优先搜索
$$f(n) = g(n) + h(n)$$

Where $g(n)$ is the path cost from the initial state to node $n$ and $h(n)$ is the estimated cost of the shortest path from n to a goal state.
其中，$g(n)$ 是初始状态到节点 $n$ 的路径成本，$h(n)$ 是 n 到目标状态的最短路径的估计成本。

$f(n)$ = estimated cost of the best path that continues from $n$ to a goal.
$f(n)$ = 从 $n$ 到目标的最佳路径的估计成本。

# Admissible Heuristic 可接受的启发式

>[!note] Calculation
>Stages in a greedy best-first tree-like search for Bucharest with the straight-line distance heuristic $h_{SLD}$. Nodes are labelled with their $h$-values.
>使用直线距离启发式 $h_{SLD}$ 对布加勒斯特进行的贪婪最佳优先树状搜索的各个阶段。节点以其 $h$ 值标注。
>
>![[Pasted image 20250719234919.png]]
>
>We show the progress of an A\* search with the goal of reaching Bucharest.
>我们展示了以到达布加勒斯特为目标的 A 星搜索进展情况。
>
>![[Pasted image 20250719235156.png]]
>
>The values of $g$ are computed from the action costs.
>$g$ 的值由行动成本计算得出。
>
>![[Pasted image 20250719235514.png]]
>
>The value of $h_{SLD}$
>$h_{SLD}$ 的值
>
>![[Pasted image 20250719235336.png]]
>
>1. Notice that Bucharest first appears on the frontier at step (e), but is not selected for expansion^[Thus not detected as a solution 因此未被检测为解决方案] because at $f=450$ it is not the lowest-cost node on the frontier that would ne Pitesti, at $f=417$.^[Another way to say this is that there might be a solution that costs 450. At step (f), a different path to Bucharest is now the lowest-cost node, at $f = 418$, so it is selected and detected as the optimal solution. 另一种说法是，可能存在一个成本为 450 的解决方案。在步骤 (f) 中，通往布加勒斯特的另一条路径现在是成本最低的节点，为 $f = 418$，因此它被选中并检测为最优解。].
>   请注意，布加勒斯特在步骤 (e) 首次出现在前沿，但未被选中进行扩展，因为在 $f=450$ 时，布加勒斯特不是前沿上成本最低的节点，而在 $f=417$ 时，布加勒斯特将成为皮特什蒂的新节点。
>   
><br> 
>
>2. A\* search is complete.^[Again, assuming all action costs are $> $ > 0$ 同样，假设所有行动的成本都是 $> $ > 0$]  Whether A\* is cost-optimal depends on certain properties of the heuristic.
>   A星搜索完成A。 A星是否成本最优，取决于启发式的某些特性。
>   
> 	  A key property is admissibility: An admissible heuristic is one overestimates the cost to reach a goal.^[An admissible heuristic is therefore optimistic. 因此，可接受的启发式是乐观的。]
> 	  一个关键特性是可接受性： 可接受的启发式就是高估了达到目标的成本。
>
><br>
>
>3. An admissible heuristic, A\* is cost-optimal, which can show with a proof by contradiction. Suppose the optimal path has cost $C^*$ , but the algorithm returns a path with cost $C>C^*$. Then there must be some node $n$ which is on the optimal path and is unexpanded^[Because if all the nodes on the optimal path had been expanded, then would have returned that optimal solution. 因为如果最优路径上的所有节点都扩展了，那么就会返回最优解。]. So then, using the notation $g^*(n)$ to mean the cost of the optimal path from the start to $n$ and $h^*(n)$ to mean the cost of the optimal path from $n$ to the neatest goal,
>    一个可接受的启发式 A 星是成本最优的，这可以用矛盾证明来证明。假设最优路径的成本为 $C^*$ ，但算法返回的路径成本为 $C>C^*$。那么一定有某个节点 $n$ 在最优路径上，并且是未扩展的。所以，用符号 $g^*(n)$ 表示从起点到 $n$ 的最优路径的成本，用符号 $h^*(n)$ 表示从 $n$ 到最整齐目标的最优路径的成本、
>   
> 	  $f(n) > C^*$ (Otherwise $n$ would have been expanded 否则，$n$ 将被展开)
> 	  $f(n) = g(n) + h(n)$ (by definition 顾名思义)
> 	  $f(n) = g^*(n) + h^(n)$ (because $m$ is on an optimal path 因为 $m$ 在最优路径上)
> 	  $f(n) \le g^*(n) + h^*(n)$ (because of admissibility, $h(n) \le h^*(n)$ 由于可接受性，$h(n) \le h^*(n)$)
> 	  $f(n) \le C^*$ (by definition, $C^* = g^*(n) + h^*(n)$ 根据定义，$C^* = g^*(n) + h^*(n)$)
> 
> <br>
> 
> 4. The first and last line form a contradiction, so the supposition that the algorithm could return a suboptimal path must be wrong - it must be that A\* return only cost-optimal paths.
>    第一行和最后一行自相矛盾，因此算法可能返回次优路径的假设一定是错误的--A星 一定只返回成本最优的路径。
> <br>
> 
> 5. A slightly stronger property is called consistency, A heuristic $h(n)$ is consistent if, for every node $n$ and every successor $n'$ of $n$ generated by an action $a$, we have:
>    如果对于每个节点 $n$ 和由行动 $a$ 产生的 $n$ 的每个后继 $n'$，我们都有以下条件，那么启发式 $h(n)$ 就是一致的：
>    
>    $$h(n) \le c(n, a, n')) + h(n')$$
>    
>    This is form of triangle inequality, which stipulates that a side of a triangle cannot be longer than the sum of the other 2 sides.
>    这是三角形不等式的一种形式，它规定三角形的一边不能长于其他两边之和。
>    
>    >[!todo] Example
>    >Consistent heuristic is the straight-line distance $h_{SLD}$ that we used in getting to Bucharest.
>    >一致的启发式是我们到达布加勒斯特时使用的直线距离 $h_{SLD}$。
>    
>6. Every consistent heuristic is admissible^[but no vice cersa 但不相反], so with a consistent heuristic , A\* is cost optimal.
>   每一个一致的启发式都是可接受的，因此在一致的启发式下，A星是成本最优的。
><br>
>
> 7. With a consistent heuristic, may end up with multiple paths reaching the same state, and if each new path has a new path has a lower path cost than the previous one, then will end up with multiple nodes for that state in the frontier, costing us both time and space.^[Some implementations of A* take care to only enter a state into the frontier once and if a better path to the state is found, all the successors of the state are updated. A* 的一些实现方法会注意只将一个状态进入前沿一次，如果发现了通往该状态的更好路径，则会更新该状态的所有后继状态。]
>    如果采用一致启发式，最终可能会有多条路径到达同一状态，而如果每条新路径的路径成本都比前一条低，那么在前沿中就会出现多个该状态的节点，从而耗费我们的时间和空间。

[[Felner et al.(2011)]] argues that the worst effects rarely happen in practice and one shouldn't be afraid of inconsistent heuristic.
认为最坏的影响在实践中很少发生，人们不应该害怕不一致的启发式。

# Inadmissible heuristic 不可接受的启发式
A\* may or may not be cost optimal.
一颗星可能是成本最优的，也可能不是。

2 cases where it is:
1. If there is even one cost-optimal path on which $h(n)$ is admissible for all nodes $n$ on the path, then that path will be found, not matter what the heuristic says for states off the path.
   如果存在一条成本最优的路径，且该路径上的所有节点 $n$ 都允许使用 $h(n)$，那么无论启发式对路径外的状态如何判断，都会找到这条路径。
<br>
2. If the optimal solution has cost $C^*$, and the second-best has cost $C_{2}$ and if $h(n)$ overestimates some costs, but never by more than $C_2 - C^*$, then A\* is guarantee to return cost-optimal solutions.
   如果最优解的成本为$C^*$，次优解的成本为$C_{2}$，并且如果$h(n)$高估了某些成本，但绝不会超过$C_2 - C^*$，那么A星就能保证返回成本最优的解。
   
Map of Romania showing contours at $f = 380$, $f = 400$ and $f = 420$ with Arad as the start state. Nodes inside a given contour have $f = g + h$ costs less than or equal to the contour value.
罗马尼亚地图，显示以阿拉德为起始点的 $f=380$、$f=400$ 和 $f=420$ 等值线。特定等高线内的节点的 $f = g + h$ 成本小于或等于等高线值。

![[Pasted image 20250720135532.png]]
# Other properties of A*

| Property         | Explanation                                        | Example |
| ---------------- | -------------------------------------------------- | ------- |
| Completeness     | A* is guaranteed to find a  solution if one exists |         |
| Time complexity  |                                                    |         |
| Space complexity |                                                    |         |
|                  |                                                    |         |
|                  |                                                    |         |
|                  |                                                    |         |
|                  |                                                    |         |
